if (app.data && app.data.event && app.data.event.code && app.data.event.code == "abc_oauth_token") {     app.log(app.data.event.data, \"Event data\")     app.executeFunction('getUserDetailsFromOauth',app.data.event.data).then((name) => {         app.log(name,'name from function')         return app.sendTextMessage(`Thanks for signing in ${name}`)     })     // async function () =>{     //     let name = await      // }     // app.sendTextMessage(\"You are successfully signed In\")     // let userdetail = app.executeFunction('getUserDetailsFromOauth')      // let ticketId = app.data.ticketId     // app.updateTicketCustomFields('100085,{s1:\"Bhaskar\", s2 : \"bhaskar@gmail.com\"}).then((data)=>{     //     // app.log(data, \"data after updating\")     // })     // app.getSupportSettings().then((data) => {     //     app.log(data.customFields,\"data of ticket support\")     // })  }  // app.log(app.sender, 'sender in main') // app.log(app.source, 'source in main') // app.log(app.constants, 'constants in main') // app.log(app.constants,'ttl in main') // app.sendTextMessage(app.sender) // app.log(app.payload,'payload in main') if (app.data && app.data.message && app.data.message.toLowerCase() === 'aia') {     app.log(\"in webview\")     return app.sendTextMessage(\"https://google.com refer this\")     // return app.sendDocument(\"https://cdn.yellowmessenger.com/BnDGoF8UNApH1622698719476.png\", { title: \"I am message title\" })     // let webViewUrl = \"?name=samplepackage&extraCharge=1.5&deliveryDate=27-01-2017&destinationName=Home&street=1infiniteloop&state=CA&city=Cupertino&country=USA&postalCode=12345&latitude=37.331686&longitude=-122.030656&isMyLocation=true&isFinalDestination=true\"     // app.log(\"url\", webViewUrl)     // return app.sendWebView(\"Testing webview\", webViewUrl, null, {     //     teamId : \"MS237D8H2K\",     //     extension : \"com.example.apple-samplecode.PackageDeliveryMS237D8H2K.MessagesExtension\",     //     // appId: 123456,     //     // appName: \"PackageDelivery\",     //     bid: \"com.apple.messages.MSMessageExtensionBalloonPlugin:MS237D8H2K:com.example.apple-samplecode.PackageDeliveryMS237D8H2K.MessagesExtension\",     //     title: \"Testing webview\",     //     text: \"webView text\"     // })     // return app.sendWebView(\"Testing webview\", webViewUrl, null, {     //     teamId : \"HFE67NEG5Y\",     //     extension : \"com.example.apple-samplecode.PackageDeliveryHFE67NEG5Y.MessagesExtension\",     //     appId: 123456,     //     appName: \"PackageDelivery\",     //     bid: \"com.apple.messages.MSMessageExtensionBalloonPlugin:HFE67NEG5Y:com.example.apple-samplecode.PackageDeliveryHFE67NEG5Y.MessagesExtension\",     //     title: \"Testing webview\",     //     text: \"webView text\"     // }) } // let teamId = '0000000000' // let extension = 'com.apple.icloud.apps.messages.business.extension' // let url = \"https://cdn.yellowmessenger.com/svQ8VSirfnss1600155253400.pdf\"; // let url = \"https://ghost-tt.github.io/yellow-messenger/accidental.html\"; // let url = 'https://yellow.chat/dateInput' //     app.sendWebView('', url, 200, { fullWidthWidget: true, scrollable: true, fixedPosition: true, teamId, extension, title: \"WebView Title\", text: 'Test description' }) // return app.triggerIntent('pan-extraction')  // } if (app.source == 'googleBusinessMessages' && app.data && app.data.message == 'test') {     return app.triggerIntent('dummy') } if (app.data && app.data.message && app.data.message.toLowerCase() == 'test pan') {     // return app.triggerIntent('pan-extraction')     return app.executeFunction('locationCoordinates')     // return app.triggerIntent('mp-testing') } // return app.executeFunction('returnPickUpPrompt') if (app.data && app.data.message && app.data.message.toLowerCase() == \"oauth\") {     // return app.oAuthForABC({     //     'responseType': 'code',     //     'scope': ['r_liteprofile', 'r_emailaddress'],     //     'clientSecret': 'yGwRWhHYIWyjyDqi',     //     'title': 'Sign in to linkedin',     //     response: ' thank you'     // });      // return app.triggerIntent('send-list-picker');     // return app.oAuthForABC({     //     'responseType': 'code',     //     'scope': ['profile'],     //     'clientSecret': '1420c06a3f8e13ddc838af5720008b52cced36d627dac4435c5b02a31605449f',     //     'title': 'Sign in to Amazon',     //     response: ' You are signed In, thank you'     // }); } if (app.data.message && app.data.message.toLowerCase() == \"pay\") {     app.log(\"In apple pay\")     // return app.requestApplePay({     //     \"merchantIdentifier\": \"merchant.com.yellowmessenger.staging\",     //     \"merchantName\": 'Yellow Messenger Apple Business Chat',     //     \"domainName\": \"staging.yellowmessenger.com\",     //     \"displayName\": \"YM TEST APPLE PAY\",     //     image: 'https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png',     //     title: 'Pay the amount',     //     subTitle: 'Payment Subtitle',     //     replyMessage: 'I know it hurts a lot',     //     \"lineItems\": [     //         {     //             \"label\": \"Item 1\",     //             \"amount\": \"1.00\",     //             \"type\": \"final\"     //         }     //     ],     //     \"total\": {     //         \"label\": \"Your Total\",     //         \"amount\": \"1.00\",     //         \"type\": \"final\"     //     },     //     \"countryCode\": \"US\",     //     \"currencyCode\": \"USD\",     // })      return app.requestApplePay({         \"merchantIdentifier\": \"merchant.com.yellowmessenger.staging\",         \"merchantName\": 'Yellow Messenger Apple Business Chat',         \"domainName\": \"staging.yellowmessenger.com\",         \"displayName\": \"YM TEST APPLE PAY\",         image: \"https://cdn.yellowmessenger.com/BnDGoF8UNApH1622698719476.png\",         title: '#YellowMessengerCares',         subTitle: 'To make world better',         replyMessage: 'Your payment is completed',         \"lineItems\": [             {                 \"label\": \"Item 1\",                 \"amount\": '1.00', //app._.get(app, 'data.params.askpayment', '1.00'),                 \"type\": \"final\"             }         ],         \"total\": {             \"label\": \"Your Total\",             \"amount\": '1.00',//app._.get(app, 'data.params.askpayment', '1.00'),             \"type\": \"final\"         },         \"countryCode\": \"US\",         \"currencyCode\": \"USD\",     })     // return app.sendTextMessage('pay'); } if (app.data.message && app.data.message.toLowerCase() == \"agent\") {     return new Promise(async (resolve) => {         let ticketData = await app.raiseTicket({             issue: `Play Store Ticket`,             contact: {                 name: 'agent 1'             },             priority: 'MEDIUM',         });         console.log('Ticket Raised');         await app.pauseBot();         return resolve();     }); }  if (     app.data &&     app.data.event &&     (app.data.event === \"ticket-closed\" ||         app.data.event.code === \"ticket-closed\") ) {     app.unPauseBot();     return app.sendTextMessage(         `Thanks for your time`     ); } if (app.data.message && app.data.message.toLowerCase() === 'dummy') {     return app.sendTextMessage(`Cards, raising genie tickets for *different* concerns **and** many more,\  SIA does it all.`, { richText: true, hideInput: true }) } if (app.data.message && app.data.message.toLowerCase() === 'yes') {     return app.sendCards({         title: 'Select your query',         text: 'Click on this to select an option regarding your query.',         actions: [{             title: 'My Activity',             text: 'The list of your today\\'s activities will be shown'         }, {             title: 'Ask a Question',             text: 'Feel free to ask any questions you have'         }]     }) } if (app.data.message && app.data.message.toLowerCase() === 'sure') {     return app.sendTextMessage('Sure, please let me know anything else I can help you with.') } if (app.data.message && app.data.message.toLowerCase() === 'time') {     return app.sendTimeZones({         title: 'Select the date and time here.',         // text: 'Slot1 text',         replyText: 'ReplyText',         timeslots: [{             \"duration\": 3600,             \"startTime\": \"2021-06-02T10:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-02T11:30+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-02T14:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-02T16:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-02T17:30+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-03T10:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-03T11:30+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-03T14:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-03T16:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-03T17:30+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-04T10:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-04T11:30+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-04T14:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-04T16:00+0530\",         },         {             \"duration\": 3600,             \"startTime\": \"2021-06-04T17:30+0530\",         }]     }) } // return app.sendTextMessage('https://yellowmessenger.com/') // app.log(app.sendWebView.toString(),'webview') // return app.triggerIntent('transfer-to-agent') // let teamId = '0000000000' // let extension = 'com.apple.icloud.apps.messages.business.extension' // app.sendWebView('WebView Title',url, null, { teamId, extension }) // app.sendWebView({url, title : 'Webview Title'},{}) // app.log(app.sendImage.toString(),'image') // app.sendVideo({url : 'https://cdn.yellowmessenger.com/FAhKKMEXCeWB1594377268747.mp4',title :'video caption' }) // app.sendImage('https://yellowmessenger.blob.core.windows.net/uploads/00020aa894708c1d9f78c681d0ca4a55/toy_drummer.usdz'); // app.sendImage(`https://cdn.yellowmessenger.com/C7via63tZZHN1594215623455.pdf`, { caption: 'PDF caption' }) // app.sendImage('https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png', { caption: 'caption' }) // app.sendImage('https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png', { caption: 'YellowMesseneger', url: 'https://yellowmessenger.com/'}) // app.sendImage('https://yellowmessenger.blob.core.windows.net/uploads/dy_toy_drummer.usdz?st=2020-11-20T15%3A35%3A34Z&se=2020-12-18T15%3A35%3A34Z&sp=r&sv=2018-03-28&sr=b&sig=azhUCVpnVL1cTS6jXU1QUp5vqBHHT9vnrAoHuuLeirQ%3D', { caption: 'Yellowmessenger' }) if (app.data.message && app.data.message.toLowerCase() === 'doc') {     app.sendDocument(`https://cdn.yellowmessenger.com/C7via63tZZHN1594215623455.pdf`, { caption: 'image caption' }) } // app.sendDocument('https://cdn.yellowmessenger.com/svQ8VSirfnss1600155253400.pdf', { caption: 'PDF Caption' }); // app.sendTextMessage(app.data.message) if (app.data.message && app.data.message.toLowerCase() == 'cards') {     // return app.triggerIntent('mp_testing')     // return app.executeFunction('sendDoc')     return app.sendCards([{         // image: 'https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png',         title: 'List picker Title',         text: 'Card description',         actions: [             {                 title: 'Talk to agent',                 text: 'talk to agent',                 // image: 'https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png'                 // url: 'https://www.google.com'             },             {                 title: 'AppointmentsAppointmentsAppointmentsAppointments',                 text: 'AppointmentsAppointmentsAppointmentsAppointmentsAppointments',                 // image: 'https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png'             }, {                 title: 'Location',                 text: 'Location',                 // image: 'https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png'             },             {                 title: 'My location',                 text: 'My location',                 // image: 'https://cdn.yellowmessenger.com/AsOWKrmWjfZ11602747714234.png'             }         ],     }], {}, { multiSelect: true }) } // app.log('log after send cards') // app.sendUrl('') if (app.data.message && app.data.message.toLowerCase() == \"abc\") {     return app.sendTextMessage('auth'); } return app.start();                    ",
